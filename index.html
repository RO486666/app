<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trade App Layout</title>

  <!-- ğŸ”— External stylesheets (lassen wir wie im Original) -->
  <link rel="stylesheet" href="CSS/ticker.css" />
  <link rel="stylesheet" href="CSS/star.css" />
  <link rel="stylesheet" href="CSS/session.css" />
  <link rel="stylesheet" href="CSS/Rechner.css" />

  <!-- PWA / Manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#00aa44" />

  <style>
    /* ==========================================
       ğŸ¯ GLOBAL BASICS + VARIABLES
       - Ziel: Ordnung, saubere Defaults, keine Duplikate
       ========================================== */
    :root {
      /* Basisfarben / Defaults */
      --color-bg: #111;
      --color-fg: #fff;

      /* Session-Glow (Fallback) */
      --session-bg-color: var(--color-bg);
      --session-glow: radial-gradient(
        ellipse at bottom,
        rgba(100, 0, 150, 0.2) 0%,
        transparent 70%
      );

      /* Box-Glow Fallback */
      --glow-color: rgba(255, 255, 255, 0.08);

      /* Grid-Lines (dezentes Raster im Hintergrund) */
      --grid-line-color: rgba(255, 255, 255, 0.03);

      /* Crypto-Gradient Farben */
      --crypto-c1: #00ffff;
      --crypto-c2: #ff00cc;
      --crypto-c3: #9900ff;

      /* Timing / Durations */
      --bg-scroll-duration: 40s;
      --stats-glow-duration: 3.5s;
      --crypto-gradient-duration: 6s;
      --crypto-pulse-duration: 2.8s;
      --coin-rotate-duration: 1.5s;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
      box-sizing: border-box;
    }

    *, *::before, *::after { box-sizing: inherit; }

    /* ==========================================
       ğŸ§± PAGE BACKGROUND & TYPO
       ========================================== */
 body {
  --session-bg-color: #111;
  --session-glow: radial-gradient(ellipse at bottom, rgba(100, 0, 150, 0.2) 0%, transparent 70%);

  background-color: var(--session-bg-color);
  color: white;
  font-family: sans-serif;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;

  background-image:
    var(--session-glow),
    linear-gradient(0deg, rgba(255,255,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size:
    100% 100%, 
    40px 40px, 
    40px 40px;
  background-repeat: no-repeat;
  background-attachment: fixed;
  animation: bgScroll 40s linear infinite;
}

    /* dezente, animierte Rasterbewegung */
    @keyframes bgScroll {
      0%   { background-position: 0 0, 0 0, 0 0; }
      100% { background-position: 400px 400px, 40px 40px, 40px 40px; }
    }

    /* Canvas fÃ¼r leichten Candle-Hintergrund */
    #bgCandles {
      opacity: 0.035;         /* super dezent */
      filter: blur(0.6px);    /* weiche Kanten */
      pointer-events: none;   /* klickt nicht durch */
      max-width: 100%;
      width: 100%;
      display: block;
    }

    /* ==========================================
       ğŸŒ LAYOUT HELPERS â€“ BOXEN
       ========================================== */
    img, canvas, .stats-box, .calc-box, .popup, .position-bar, .trade-box, .tool-box {
      max-width: 100%;
      width: 100%;
    }

.stats-box {
  padding: 18px 22px;
  border-radius: 16px;
  background: linear-gradient(135deg, #1c1c1c, #262626);
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.04),
    0 4px 10px rgba(0, 0, 0, 0.4),
    0 0 14px var(--glow-color, rgba(255, 255, 255, 0.08));
  margin-top: 25px;
  text-align: left;
  max-width: 440px;
  margin-left: auto;
  margin-right: auto;
  transition: box-shadow 0.4s ease, transform 0.3s ease;
  overflow-x: hidden;
  animation: statsGlowPulse 3.5s ease-in-out infinite;
}

    @keyframes statsGlowPulse {
      0%   { box-shadow: 0 0 6px var(--glow-color); }
      50%  { box-shadow: 0 0 18px var(--glow-color); }
      100% { box-shadow: 0 0 6px var(--glow-color); }
    }

    /* ==========================================
       ğŸ”¥ SESSION-SPEZIFISCHE THEMES
       - setzen jeweils --glow-color + Hintergrund-Gradient
       ========================================== */
    .session-glow-sydney    { --glow-color: #3388ff; background: linear-gradient(145deg, #1e1e1e, #223044); }
    .session-glow-tokyo     { --glow-color: #00aaff; background: linear-gradient(145deg, #1e1e1e, #1c2e36); }
    .session-glow-london    { --glow-color: #ffd700; background: linear-gradient(145deg, #1e1e1e, #3c3c1a); }
    .session-glow-ny        { --glow-color: #ff4500; background: linear-gradient(145deg, #1e1e1e, #3a1e1e); }
    .session-glow-lk        { --glow-color: #ccff00; background: linear-gradient(145deg, #1e1e1e, #3c4a1c); }
    .session-glow-nyk       { --glow-color: #ff8800; background: linear-gradient(145deg, #1e1e1e, #4b2a1c); }
    .session-glow-deadzone  { --glow-color: #333333; background: linear-gradient(145deg, #1e1e1e, #2c2c2c); }
    .session-glow-crypto    { --glow-color: #9900ff; background: linear-gradient(145deg, #1e1e1e, #3e1e4e); }

    /* ==========================================
       ğŸŒˆ CRYPTO LABEL â€“ animierter Text + Coin
       ========================================== */
    .crypto-animate {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: bold;
      font-size: 18px;
      background: linear-gradient(90deg, var(--crypto-c1), var(--crypto-c2), var(--crypto-c3), var(--crypto-c1));
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow:
        0 0 6px rgba(0,255,255,0.8),
        0 0 12px rgba(255,0,204,0.6),
        0 0 20px rgba(153,0,255,0.4);
      animation: cryptoGradientShift var(--crypto-gradient-duration) ease infinite,
                 cryptoGlowPulse var(--crypto-pulse-duration) ease-in-out infinite;
    }

    .crypto-animate .coin {
      display: inline-block;
      font-size: 22px;
      background: linear-gradient(90deg, #ff00cc, #ff8800, #ffff00);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 8px rgba(255,0,204,0.8);
      animation: spinCoin var(--coin-rotate-duration) linear infinite;
    }

    @keyframes spinCoin {
      0%   { transform: rotateY(0deg); }
      100% { transform: rotateY(360deg); }
    }

    @keyframes cryptoGradientShift {
      0%   { background-position: 0% 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes cryptoGlowPulse {
      0% {
        text-shadow:
          0 0 6px rgba(0,255,255,0.8),
          0 0 12px rgba(255,0,204,0.6),
          0 0 20px rgba(153,0,255,0.4);
      }
      100% {
        text-shadow:
          0 0 10px rgba(255,0,204,0.9),
          0 0 18px rgba(0,255,255,0.7),
          0 0 30px rgba(153,0,255,0.5);
      }
    }

    /* ==========================================
       ğŸ“‹ REGEL-TOGGLE & FIRE-LOOK BOX
       ========================================== */
    #ruleBox {
      background: linear-gradient(135deg, #1a1a1a, #292929);
      box-shadow: 0 0 8px rgba(0, 255, 153, 0.25);
      border: 1px solid rgba(0, 255, 153, 0.3);
      border-radius: 10px;
      padding: 12px 18px;
      color: #00ff99;
      font-weight: bold;
      transition: box-shadow 0.3s ease, transform 0.2s ease;
      cursor: pointer;
    }
    #ruleBox:hover { box-shadow: 0 0 12px rgba(0, 255, 153, 0.4); }

    .rules-fire-wrapper {
      position: relative;
      z-index: 0;
      border-radius: 14px;
      overflow: hidden;
      margin-top: 20px;
    }

    #rulesBox {
      background: linear-gradient(135deg, #1a0f0f, #2a1111);
      border: 1px solid #cc3333;
      color: #ff5555;
      text-shadow: 1px 1px 0 #000, -1px -1px 0 #000;
      border-radius: 14px;
      padding: 20px;
      line-height: 1.6;
      font-family: "Segoe UI", Tahoma, sans-serif;
      position: relative;
      z-index: 1;
      animation: redPulse 2.4s ease-in-out infinite alternate,
                 fieryGlow 3s ease-in-out infinite alternate;
      box-shadow:
        0 0 10px rgba(255, 50, 50, 0.3),
        0 0 20px rgba(255, 30, 30, 0.2),
        inset 0 0 10px rgba(255, 0, 0, 0.1);
    }

    @keyframes redPulse {
      0%   { text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 0 0 2px rgba(255, 0, 0, 0.15); }
      100% { text-shadow: 1px 1px 0 #000, -1px -1px 0 #000, 0 0 5px rgba(255, 60, 60, 0.25); }
    }

    @keyframes fieryGlow {
      0% {
        box-shadow:
          0 0 10px rgba(255, 60, 0, 0.3),
          0 0 18px rgba(255, 80, 0, 0.2),
          inset 0 0 10px rgba(255, 0, 0, 0.1);
      }
      100% {
        box-shadow:
          0 0 16px rgba(255, 100, 0, 0.6),
          0 0 32px rgba(255, 150, 0, 0.3),
          inset 0 0 14px rgba(255, 50, 0, 0.25);
      }
    }

    /* kleine, animierte Funken (optional) */
    .fire-particles {
      pointer-events: none;
      position: absolute;
      top: 50%;
      left: 50%;
      width: 6px;
      height: 6px;
      z-index: 3;
      background: radial-gradient(circle, rgba(255, 140, 0, 0.8) 0%, transparent 70%);
      border-radius: 50%;
      animation: fireSparkOut 1.5s linear infinite;
      transform: translate(-50%, -50%);
    }

    @keyframes fireSparkOut {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(-200%, -200%) scale(0.4);
        opacity: 0;
      }
    }

    /* Listen & Typo im Rules-Box-Kontext */
    #rulesBox ul, #rulesBox ol {
      margin-left: 20px;
      padding-left: 0;
      list-style-position: inside;
    }
    #rulesBox li { padding-left: 8px; margin-bottom: 4px; }
    #rulesBox strong {
      display: inline-block;
      margin-top: 10px;
      color: #ff7777;
      text-shadow: 1px 1px 1px #000, 0 0 4px rgba(255, 80, 80, 0.4);
    }
    #rulesBox hr {
      border: none;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      margin: 20px 0;
    }
    #rulesBox button {
      background: linear-gradient(135deg, #550000, #770000);
      color: white;
      border: 1px solid #000;
      border-radius: 8px;
      padding: 8px 16px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 0 6px rgba(255, 0, 0, 0.4);
      transition: all 0.25s ease;
    }
    #rulesBox button:hover {
      background: #992222;
      box-shadow: 0 0 10px rgba(255, 60, 60, 0.5);
    }






    /* ==========================================
       â™¿ Optional: Bewegt sich weniger, wenn Nutzer es wÃ¼nscht
       ========================================== */
    @media (prefers-reduced-motion: reduce) {
      body { animation: none; }
      .stats-box, .crypto-animate, .crypto-animate .coin { animation: none; }
    }
  </style>
<!-- ğŸ“± Mobile Stylesheet -->
<link rel="stylesheet" href="mobile.css" media="screen and (max-width: 480px)">

<!-- ğŸ“¢ Ticker -->
<div class="ticker-box">
  <div id="tickerContent" class="ticker-content">
    ğŸ“¢ Lade Marktdaten...
  </div>
</div>

<!-- ğŸ“Š Hintergrund-Candles -->
<canvas id="bgCandles"
        style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1;">
</canvas>

<!-- ğŸ“š Scripts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="scripts/position.js"></script>
<script src="scripts/dawn.js"></script>
<script src="scripts/tax.js"></script>
<script src="scripts/bg-candles.js"></script>
<script src="scripts/ticker.js"></script> <!-- ğŸ‘ˆ wichtig -->
<script src="imageStorage.js"></script>

</head>
<body>



<!-- ğŸ¨ Session-Hintergrund -->
<div id="sessionBackgroundOverlay"></div>

<!-- ğŸ•’ Session-Zeit -->
<div class="ticker" id="sessionText">Session-Zeit: 00:00</div>

<!-- ğŸ—“ï¸ Tageszusammenfassung -->
<div id="daySummary" class="ticker day-summary">ğŸ—“ï¸ Lade Tagesinfo...</div>

<!-- ğŸ“¦ Session-Details -->
<div class="session-details-box" id="sessionDetailsBox"></div>

<!-- ğŸ“„ Detail-Text zur Tageszusammenfassung -->
<div id="dayDetails" class="day-details" style="display: none;"></div>

<!-- ğŸ’¬ Session-Kommentar -->
<div id="sessionInfo"
     style="margin-top: 12px; padding: 12px 18px; color: #fff;
            font-size: clamp(13px, 3.5vw, 16px); font-style: italic; text-align: center;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(153, 0, 255, 0.12), rgba(153, 0, 255, 0.22));
            text-shadow: 0 0 2px rgba(153, 0, 255, 0.6), 0 0 6px rgba(255, 0, 204, 0.3);
            box-shadow: inset 0 0 10px rgba(153, 0, 255, 0.3), 0 0 6px rgba(255, 0, 204, 0.2);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 600;
            backdrop-filter: blur(2px); transition: all 0.3s ease;">
  Tipps und Infos zur Session erscheinen hier...
</div>


<!-- ğŸŸ¢ Fortschrittsbalken -->
<div class="progress-container">
  <div class="progress-bar" id="progressBar"></div>
</div>

<!-- ğŸš¨ Alerts -->
<div class="alert-below-header" id="alertBox"></div>

<!-- ğŸ”˜ Tab-Buttons -->
<div class="tab-buttons" style="margin-top: 20px; display: flex; flex-wrap: wrap; justify-content: center;">
  <button id="btn-calc-pos" onclick="switchCalcTab('pos')">ğŸ“ Position Size</button>
  <button id="btn-calc-dawn" onclick="switchCalcTab('dawn')">ğŸŒ’ Dawn Rechner</button>
  <button id="btn-calc-taxpro" onclick="switchCalcTab('taxpro')">ğŸ“„ Steuer / Netto-Planer</button>
</div>

<!-- ğŸ“„ Steuer-/Netto-Planer -->
<div id="calc-taxpro" class="calc-box" style="margin-top: 15px; display: none;">
  <div class="stats-box">

    <!-- ğŸ’¼ Jahresgehalt -->
    <label for="jahresEinkommen">ğŸ’¼ Jahresgehalt (9/5 Job, brutto â‚¬):</label>
    <input type="number" id="jahresEinkommen" placeholder="z. B. 42000">

    <!-- ğŸ’° Steuer-Berechnung -->
    <div id="steuerMode">
      <label for="gewinnBetrag">ğŸ“ˆ Trading-Gewinn (aktueller Gewinn â‚¬):</label>
      <input type="number" id="gewinnBetrag" placeholder="z. B. 500">

      <label><input type="checkbox" id="kirchensteuer"> âœï¸ Kirchensteuer (9 %)</label><br>
      <label><input type="checkbox" id="soliZuschlag"> ğŸ’£ SolidaritÃ¤tszuschlag (5.5 %)</label><br>
<label><input type="checkbox" id="reserveZehn"> ğŸ’¥ Komplette Vorauszahlung fÃ¼r nÃ¤chstes Jahr</label><br>


      <button onclick="berechneSteuern()" class="tax-button">ğŸ“Š Steuer berechnen</button>
      <div id="steuerAusgabe"></div>
    </div>

<!-- ğŸ¦ Netto-Planer -->
<div id="nettoMode" style="display:none">
  <label for="nettoBrutto">ğŸ“ˆ Brutto-Gewinn (â‚¬):</label>
  <input type="number" id="nettoBrutto" placeholder="z. B. 1000">

  <label for="nettoSteuer">ğŸ’¸ Steuerlast (â‚¬):</label>
  <input type="number" id="nettoSteuer" placeholder="z. B. 350">

  <label for="nettoReserve">ğŸ’¥ Reserve (â‚¬):</label>
  <input type="number" id="nettoReserve" placeholder="z. B. 250">

  <label for="nettoEntnommen">ğŸ¦ TatsÃ¤chlich entnommen (â‚¬):</label>
  <input type="number" id="nettoEntnommen" placeholder="z. B. 800">

  <button onclick="berechneNettoPlan()" class="tax-button">ğŸ’¸ Netto berechnen</button>
  <div id="nettoAusgabe"></div>
</div>


    <!-- ğŸ“Š Trades -->
    <div id="tradeTable" style="margin-top:20px;"></div>

    <!-- ğŸ”„ Umschalter -->
<button onclick="switchPlanMode()" id="planToggleBtn">
  ğŸ” Zu Netto-Planer wechseln
</button>

  </div>
</div>




<!-- â˜ ï¸ Dawn Rechner -->
<div id="calc-dawn" class="calc-box" style="display:none; margin-top: 15px;">
  <div class="stats-box">
    <label for="dawnCapital">ğŸ“¦ Startkapital (â‚¬):</label>
    <input type="number" id="dawnCapital" placeholder="z. B. 1000">

    <label for="dawnLoss">ğŸ“‰ Verlust pro Dawn (%) :</label>
    <input type="number" id="dawnLoss" placeholder="z. B. 3" step="0.1">

    <button onclick="simulateDawnDeath()"
            style="background: #0077cc; color: white; border: none; border-radius: 6px;
                   padding: 10px; font-weight: bold; margin-top: 12px; width: 100%;
                   cursor: pointer;">
      â˜ ï¸ Dawn-Simulation starten
    </button>

    <p id="dawnDeathResult" style="margin-top: 10px; font-weight: bold; font-size: 16px;"></p>
  </div>
</div>

<!-- ğŸ“ Positionstab -->
<div id="calc-pos" class="calc-box" style="margin-top:15px; display:none;">

  <!-- Normaler PositionsgrÃ¶ÃŸenrechner -->
  <div id="pos-mode-main" class="stats-box sub-box" style="display:block;">
    <label for="accountSize">ğŸ“¦ KontogrÃ¶ÃŸe (â‚¬):</label>
    <input type="number" id="accountSize" placeholder="z. B. 1000">

    <label for="riskPercent">âš ï¸ Risiko in %:</label>
    <input type="number" id="riskPercent" placeholder="z. B. 1" step="0.1">

    <label for="stopLossPips">ğŸ›‘ Stop-Loss (in Pips):</label>
    <input type="number" id="stopLossPips" placeholder="z. B. 20">

    <label for="symbolSelector">ğŸ’± Trading-Paar:</label>
    <select id="symbolSelector"></select>

    <label for="leverage">âš™ï¸ Hebel:</label>
    <input type="number" id="leverage" value="500" min="1">

    <button onclick="calculatePositionSize()">ğŸ“ Berechnen</button>
    <!-- Ergebnis-Box -->
    <div id="positionSizeResult" class="result-box"></div>

    <!-- Umschalter -->
    <button onclick="switchPosMode('max')" style="margin-top:15px; width:100%;">ğŸ” Zu Max-Positions-Rechner</button>
    <button onclick="switchPosMode('pips')" style="margin-top:10px; width:100%;">ğŸ” Zu Pip-Rechner</button>
  </div>

  <!-- Max Positions Rechner -->
  <div id="pos-mode-max" class="stats-box sub-box" style="display:none;">
    <label for="maxposAccountSize">ğŸ“¦ KontogrÃ¶ÃŸe (â‚¬):</label>
    <input type="number" id="maxposAccountSize" placeholder="z. B. 1000">

    <label for="maxposRiskPercent">âš ï¸ Risiko in % pro Trade:</label>
    <input type="number" id="maxposRiskPercent" placeholder="z. B. 1" step="0.1">

    <label for="maxposStopLoss">ğŸ›‘ Stop-Loss (in Pips):</label>
    <input type="number" id="maxposStopLoss" placeholder="z. B. 20">

    <label for="maxposLeverage">âš™ï¸ Hebel:</label>
    <input type="number" id="maxposLeverage" value="500" min="1">

    <label>ğŸ“ LotgrÃ¶ÃŸe von:</label>
    <input type="number" id="lotFrom" step="0.01">

    <label>ğŸ“ LotgrÃ¶ÃŸe bis:</label>
    <input type="number" id="lotTo" step="0.01">

    <button onclick="calculateMaxPositions()">ğŸ“ Berechnen</button>
    <!-- Ergebnis-Box -->
    <div id="maxposResults" class="result-box"></div>

    <button onclick="switchPosMode('main')" style="margin-top:15px; width:100%;">ğŸ” ZurÃ¼ck</button>
  </div>

  <!-- Pip-Rechner -->
  <div id="pos-mode-pips" class="stats-box sub-box" style="display:none;">
    <label>ğŸ’± Symbol:</label>
    <select id="pipSymbolSelector"></select>

    <label>ğŸ“¦ Lots:</label>
    <input type="number" id="lots" value="0.01" step="0.01">

    <label>ğŸ›‘ Stop-Loss (Pips):</label>
    <input type="number" id="slPips" placeholder="z. B. 20">

    <label>ğŸ¯ TP1 (Pips):</label>
    <input type="number" id="tp1Pips" placeholder="z. B. 50">

    <label>ğŸ¯ TP2 (Pips):</label>
    <input type="number" id="tp2Pips" placeholder="z. B. 80">

    <label>ğŸ¯ TP3 (Pips):</label>
    <input type="number" id="tp3Pips" placeholder="z. B. 100">

    <button onclick="calculatePipsByLots()">ğŸ“ Berechnen</button>
    <!-- Ergebnis-Box -->
    <div id="pipResult" class="result-box"></div>

    <button onclick="switchPosMode('main')" style="margin-top:15px; width:100%;">ğŸ” ZurÃ¼ck</button>
  </div>

</div>





  <!-- â„¹ï¸ Info-Box -->
  <div style="text-align:right; margin-bottom: 5px;">
    <span onclick="toggleInfoBox()"
          style="cursor:pointer; background:#444; border-radius:50%; padding:3px 8px;
                 font-weight:bold; color:#0ff;"
          title="ErklÃ¤rung anzeigen">i</span>
  </div>
  <div id="posInfoBox"
       style="display:none; background:#222; padding:12px; border-radius:8px; margin-top:10px;
              color:#ccc; font-size:14px; text-align:left;">
    <strong>â„¹ï¸ Was macht dieser Rechner?</strong><br><br>
    Der PositionsgrÃ¶ÃŸen-Rechner hilft dir zu ermitteln, wie viele Lots du in einem Trade einsetzen darfst, ohne mehr als einen bestimmten Prozentsatz deines Kontos zu riskieren...
  </div>
</div>

<!-- ğŸ“† Kalender -->
<div id="journalCalendarBox" class="stats-box" style="margin-top: 20px;">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <button onclick="changeMonth(-1)">â¬…ï¸</button>
    <h3 id="calendarTitle">ğŸ—“ï¸ Journal-Kalender</h3>
    <button onclick="changeMonth(1)">â¡ï¸</button>
  </div>

  <canvas id="calendarEquityChart" height="150" style="margin:10px auto 5px auto; display:block;"></canvas>

  <div id="calendarEquityStats" style="color: #ccc; margin-top: 5px;"></div>
  <div id="calendarContainer" style="margin-top: 10px;"></div>
  <div id="calendarStats" style="margin-top: 5px; color: #ccc;"></div>
  <div id="journalEntryList" style="margin-top: 0;"></div>
</div>

<!-- ğŸ—‘ï¸ Reset-Buttons -->
<div style="margin:20px 0; text-align:center;">
  <button onclick="resetCurrentMonth()" style="margin:5px; background:#cc6600; color:white;
                                                padding:8px 15px; border:none; border-radius:5px;">
    ğŸ—“ï¸ Monat zurÃ¼cksetzen
  </button>
  <button onclick="resetSelectedDay()" style="margin:5px; background:#0066cc; color:white;
                                               padding:8px 15px; border:none; border-radius:5px;">
    ğŸ“… Tag zurÃ¼cksetzen
  </button>
  <button onclick="resetAllJournal()" style="margin:5px; background:#990000; color:white;
                                              padding:8px 15px; border:none; border-radius:5px;">
    ğŸ—‘ï¸ Alles lÃ¶schen
  </button>
</div>

<!-- ğŸ“˜ Journal-Eingabe -->
<div id="calc-journal" class="calc-box" style="display:none; margin-top: 10px;">
  <div class="stats-box journal-box">

    <!-- Strategiemodus -->
    <label>ğŸ§­ Strategie-Modus:</label>
    <select id="tradingMode" onchange="updateBiasOptions()" class="input" style="width: 100%;">
      <option value="day">Daytrading</option>
      <option value="swing">Swing-Trading</option>
    </select>

    <!-- Datum -->
    <label>ğŸ“† Datum:</label>
    <input type="date" id="journalManualDate" class="input" style="width: 100%;" />

    <!-- Symbol -->
    <label>ğŸ’± Symbol:</label>
    <input type="text" id="journalSymbol" placeholder="z. B. EUR/USD" class="input" oninput="suggestSymbol()" autocomplete="off" style="width: 100%;" />
    <div id="symbolSuggestions" style="background:#222; color:white; padding:5px; display:none; border-radius:6px;"></div>

    <!-- Einstieg + Richtung -->
    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
      <div style="flex: 1; min-width: 130px;">
        <label>ğŸ¯ Einstieg:</label>
        <input type="number" id="journalEntry" class="input" onchange="autoSuggestExit()" />
      </div>
      <div style="flex: 1; min-width: 130px;">
        <label>Richtung:</label>
        <select id="journalDirection" class="input" onchange="autoSuggestExit()">
          <option value="long">ğŸ“ˆ Long</option>
          <option value="short">ğŸ“‰ Short</option>
        </select>
      </div>
    </div>

    <!-- LotgrÃ¶ÃŸe -->
    <label>ğŸ“¦ LotgrÃ¶ÃŸe:</label>
    <select id="journalLots" class="input" style="width: 100%; background-color: white; color: black;">
      <option value="">â€“ Bitte wÃ¤hlen â€“</option>
      <option value="0.01">0.01</option>
      <option value="0.02">0.02</option>
      <option value="0.03">0.03</option>
      <option value="0.05">0.05</option>
      <option value="0.10">0.10</option>
      <option value="0.25">0.25</option>
      <option value="0.50">0.50</option>
      <option value="1.00">1.00</option>
      <option value="2.00">2.00</option>
      <option value="3.00">3.00</option>
      <option value="5.00">5.00</option>
      <option value="10.00">10.00</option>
      <option value="25.00">25.00</option>
      <option value="50.00">50.00</option>
      <option value="100.00">100.00</option>
    </select>

    <!-- PnL -->
    <label>ğŸ“Š PnL (â‚¬):</label>
    <input type="text" id="journalPnL" class="input" placeholder="z. B. -50.00" style="width: 100%; background-color: white; color: black;" />

    <!-- Emotion -->
    <div class="emotion-block">
      <label>ğŸ˜ Fokus <strong>vor</strong> dem Trade:</label>
      <div id="starsBefore" class="star-rating"></div>
      <input type="hidden" id="emotionBefore" value="5" />
    </div>

    <div class="emotion-block">
      <label>ğŸ˜¤ Emotion <strong>nach</strong> dem Trade:</label>
      <div id="starsAfter" class="star-rating"></div>
      <input type="hidden" id="emotionAfter" value="5" />
    </div>

    <!-- Setup Auswahl -->
    <label>ğŸ§  Setup:</label>
    <select id="journalSetup" class="input">
      <option value="">â€“ Setup wÃ¤hlen â€“</option>
      <option value="Rejectiont">Rejection</option>
      <option value="Breakout + Rejection">Breakout + Rejection</option>
      <option value="Liquidity Grab">Liquidity Grab</option>
      <option value="Shift">Shift HTF/LTF</option>
      <option value="HH HL LH LL">HH HL LH LL</option>
    </select>

    <!-- âœ… Setup-Check Box -->
    <div id="setupBoxWrapper" style="margin-top: 10px; border-radius: 12px; padding: 16px; background: linear-gradient(135deg, #3d1e1e, #6b2f2f); border: 2px solid #aa3333; color: #eee; box-shadow: 0 0 8px rgba(255, 50, 50, 0.25);">
      <label style="font-weight: bold; font-size: 16px;">âœ… Setup-Check</label>

      <!-- Bias Auswahl -->
      <label>ğŸ§­ Multi-Timeframe Bias:</label>
      <div id="biasTimeframes" style="display: flex; flex-wrap: wrap; gap: 10px;">
        <label><input type="checkbox" value="15M" onchange="updateSetupScoreDisplay()" /> 15M</label>
        <label><input type="checkbox" value="30M" onchange="updateSetupScoreDisplay()" /> 30M</label>
        <label><input type="checkbox" value="1H" onchange="updateSetupScoreDisplay()" /> 1H</label>
        <label><input type="checkbox" value="4H" onchange="updateSetupScoreDisplay()" /> 4H</label>
        <label><input type="checkbox" value="D1" onchange="updateSetupScoreDisplay()" /> D1</label>
        <label><input type="checkbox" value="W1" onchange="updateSetupScoreDisplay()" /> W1</label>
      </div>

      <!-- Checkliste -->
      <div id="ruleChecklist" style="display: flex; flex-direction: column; gap: 10px; margin-top:10px;">
        <label><input type="checkbox" id="ruleAOI" onchange="updateSetupScoreDisplay()" /> ğŸ§± AOI / POI reagiert sichtbar</label>
        <label><input type="checkbox" id="ruleEntry" onchange="updateSetupScoreDisplay()" /> ğŸ¯ Entry-Trigger bestÃ¤tigt</label>
        <label><input type="checkbox" id="ruleEntryPattern" onchange="updateSetupScoreDisplay()" /> ğŸ§  Einstiegsmuster sichtbar</label>
        <label><input type="checkbox" id="rulePsych" onchange="updateSetupScoreDisplay()" /> ğŸ’¡ Psychologisches Level</label>
        <label><input type="checkbox" id="ruleSession" onchange="updateSetupScoreDisplay()" /> ğŸ•’ Richtiges Zeitfenster</label>
        <label><input type="checkbox" id="ruleRR" onchange="updateSetupScoreDisplay()" /> ğŸ“ Minimum 1:2.5 RR</label>
        <label><input type="checkbox" id="ruleLTFShift" onchange="updateSetupScoreDisplay()" /> ğŸ” LTF Strukturwechsel</label>

        <!-- Setup-Score Anzeige -->
        <div id="setupScoreDisplay" style="margin-top: 12px; font-weight: bold;">
          ğŸ“Š Setup-Score: <strong>0%</strong> â€“ âŒ Nicht gÃ¼ltig
        </div>
      </div>
    </div>

    <!-- Kommentare -->
    <div style="margin-top: 20px;">
      <label>ğŸ“ Kommentar <strong>vor dem Trade</strong>:</label>
      <textarea id="journalNotesBefore" rows="2" class="input"></textarea>

      <label>ğŸ“ Kommentar <strong>nach dem Trade</strong>:</label>
      <textarea id="journalNotesAfter" rows="2" class="input"></textarea>

      <!-- Screenshot Upload -->
      <label for="screenshotInput">ğŸ“¸ Screenshots hochladen (optional):</label>
      <input type="file" id="screenshotInput" accept="image/*" multiple class="input" />

      <!-- Speichern -->
      <button id="saveJournalEntryButton" onclick="saveJournalEntry()" style="background-color: #0077cc; color: white; padding: 14px; border-radius: 8px; margin-top: 10px; font-weight: bold; width: 100%;">
        ğŸ’¾ Eintrag speichern
      </button>
    </div>
  </div>
</div>


<!-- Lightbox fÃ¼r Screenshots -->
<div id="lightboxOverlay" style="display:none;" onclick="closeLightbox()">
  <img id="lightboxImage" src="" alt="Full Screenshot" />
</div>


<!-- ğŸ“‹ Toggle-Box fÃ¼r deine Trading-Regeln -->
<div class="stats-box" onclick="toggleRules()" style="cursor:pointer;">
  ğŸ“œ <strong>Setup-Regeln anzeigen / ausblenden</strong>
</div>

<!-- ğŸ”¥ Regeln mit Fire-Animation -->
<div class="rules-fire-wrapper">
  <div id="rulesBox" class="stats-box" style="display:none; line-height: 1.6;">
    <strong>Rules Of Rules</strong><br><br>

    <!-- Seite 1 -->
    <div id="rulePage1">
      <strong>ğŸ“ Grundregeln fÃ¼r Entry & Struktur</strong><br><br>

      <strong>AOI-Zone wÃ¤hlen:</strong><br>
      Buy/Sell nur bei Weekly oder Daily AOI<br>
      â†’ Alle Timeframes darunter dienen nur zur Entry-BestÃ¤tigung.<br><br>

      <strong>Kein Entry ohne Rejection von:</strong>
      <ul style="margin-left: 20px;">
        <li>Strukturpunkt</li>
        <li>EMA</li>
        <li>AOI</li>
        <li>Runder psychologischer Level</li>
        <li>Weekly Rejection Candle (Weekly/Daily sichtbar)</li>
      </ul><br>

      <strong>Buy/Sell Entry-Bedingung:</strong>
      <ul style="margin-left: 20px;">
        <li>4H Higher Low (HL) fÃ¼r Buy</li>
        <li>4H Lower High (LH) fÃ¼r Sell</li>
        <li>Oder potenzieller HL/LH mit Engulfing an AOI</li>
      </ul><br>

      <strong>Entry-Prozess nach HL/LH:</strong><br>
      Struktur-Shift 15Mâ€“1H abgleichen mit hÃ¶herem TF.<br><br>

      <strong>Nach Shift auf 15M, 30M, 1H:</strong>
      <ul style="margin-left: 20px;">
        <li>Suche nach Engulfing Candle auf 1H / 2H / 4H</li>
        <li>Je hÃ¶her der TF â†’ desto stÃ¤rkere BestÃ¤tigung</li>
      </ul><br>

      <strong>âš ï¸ Stop-Loss-Regel:</strong><br>
      SL immer an dem Punkt setzen, wo die Idee ungÃ¼ltig wird.<br><br>

      <strong>ğŸ¯ Take-Profit-Regel:</strong>
      <ul style="margin-left: 20px;">
        <li>Bei Weekly AOI â†’ TP1 = Strukturpunkt (KerzenkÃ¶rper)</li>
        <li>Bei Daily AOI â†’ TP1 = Strukturpunkt (KerzenkÃ¶rper)</li>
      </ul>
    </div>

    <!-- Seite 2 -->
    <div id="rulePage2" style="display:none;">
      <strong>ğŸ“˜ Confluence Short / Long Regelwerk</strong><br><br>

      <strong>1. Markt-Bias Bewertung:</strong><br>
      <ul style="margin-left: 20px;">
        <li>Weekly Bullish/Bearish: 1 â€“ 3</li>
        <li>Daily Bullish/Bearish: 1 â€“ 3</li>
        <li>4H Bullish/Bearish: 1 â€“ 3</li>
      </ul>

      <strong>1.1 Bewertungsstufen:</strong>
      <ul style="margin-left: 20px;">
        <li>1 = Oben</li>
        <li>2 = Auf dem Weg zur AOI</li>
        <li>3 = In der AOI</li>
      </ul><hr>

      <strong>2. Struktur-Retest (HTF):</strong>
      <ul style="margin-left: 20px;">
        <li>Weekly retestet vorherigen Strukturpunkt</li>
      </ul><hr>

      <strong>3. Daily Rejection:</strong>
      <ul style="margin-left: 20px;">
        <li>Rejection an AOI</li>
        <li>Rejection an rundem psychologischen Level (00 / 50)</li>
      </ul><hr>

      <strong>4. Strukturaufbau (LTF):</strong>
      <ul style="margin-left: 20px;">
        <li>Warten auf HL / LH</li>
        <li>Struktur-Shift auf 15M / 30M / 1H</li>
      </ul><hr>

      <strong>5. Entry-Signal:</strong>
      <ul style="margin-left: 20px;">
        <li>BestÃ¤tigung durch bullische/bÃ¤rische Formation</li>
      </ul><hr>

      <strong>6. Set and Forget:</strong>
      <ul style="margin-left: 20px;">
        <li>Nach Entry nicht eingreifen</li>
        <li>Setup vertrauen, kein Nachjustieren</li>
      </ul>

      <div class="fire-sparks"></div>
    </div>

    <!-- Navigation -->
    <div style="margin-top: 20px; display: flex; justify-content: space-between;">
      <button onclick="showPage(1)" id="prevPageBtn" style="display:none;">â¬…ï¸ ZurÃ¼ck</button>
      <button onclick="showPage(2)" id="nextPageBtn">Weiter â¡ï¸</button>
    </div>

    <div class="fire-particles"></div>
  </div>
</div>




<!-- ğŸ“œ Skript-Einbindungen -->
<script src="scripts/session-popup.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="scripts/buttons.js"></script>
<script src="scripts/session.js"></script>
<script src="scripts/screen.js"></script>
<script src="scripts/background-session.js"></script>

<!-- âœ… Erst die Daten -->
<script src="scripts/pairsData.js"></script>

<!-- âœ… Dann die Rechner -->
<script src="scripts/position.js"></script>
<script src="scripts/Piprechner.js"></script>

<!-- Rest -->
<script src="scripts/dawn.js"></script>
<script src="scripts/tax.js"></script>
<script src="imageStorage.js"></script>
<script src="scripts/bg-candles.js"></script>
<script src="scripts/ticker.js"></script>
<script src="scripts/jornal.js"></script>
<script src="scripts/pwa.js"></script>
<script src="scripts/rules.js"></script>
<script type="module" src="pocketbase-init.js"></script>



</body>









</html>

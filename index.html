<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Trade App ‚Äì UI v0.2</title>

  <!-- Existing Styles behalten -->
    <link rel="stylesheet" href="CSS/sidebar.css" />
  <link rel="stylesheet" href="CSS/ticker.css" />
  <link rel="stylesheet" href="CSS/star.css" />
  <link rel="stylesheet" href="CSS/crypto.css">
  <link rel="stylesheet" href="CSS/session.css" />
  <link rel="stylesheet" href="CSS/posmax.css" />
  <link rel="stylesheet" href="CSS/Rechner.css" />
  <link rel="stylesheet" href="CSS/rules.css" />
  <link rel="stylesheet" href="CSS/jornal.css" />
  <link rel="stylesheet" href="CSS/quiz.css" />
  <link rel="stylesheet" href="CSS/checklist.css" />

  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#00aa44" />

  <!-- ============ v0.2 DESIGN KERNEL ============ -->
  <style>
    /* ==========================================
       üéØ GLOBAL BASICS + VARIABLES
       ========================================== */
    :root {
      --color-bg: #111;
      --color-fg: #fff;

      /* Session-Glow (Fallback) */
      --session-bg-color: var(--color-bg);
      --session-glow: radial-gradient(
        ellipse at bottom,
        rgba(100, 0, 150, 0.2) 0%,
        transparent 70%
      );

      /* Box-Glow Fallback */
      --glow-color: rgba(255, 255, 255, 0.08);

      /* Grid-Lines */
      --grid-line-color: rgba(255, 255, 255, 0.03);

      /* Crypto-Gradient Farben */
      --crypto-c1: #00ffff;
      --crypto-c2: #ff00cc;
      --crypto-c3: #9900ff;

      /* Timing / Durations */
      --bg-scroll-duration: 40s;
      --stats-glow-duration: 3.5s;
      --crypto-gradient-duration: 6s;
      --crypto-pulse-duration: 2.8s;
      --coin-rotate-duration: 1.5s;

      --radius: 12px;
      --fast: 0.2s;
      --accent: #9933ff;
      --accent2: #ff00ff;
      --panel: #141414;
      --panel-glow: rgba(255, 255, 255, 0.04);
    }

    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      max-width: 100vw;
      overflow-x: hidden;
      box-sizing: border-box;
    }

    *,
    *::before,
    *::after {
      box-sizing: inherit;
    }

    /* ==========================================
       üß± PAGE BACKGROUND & TYPO
       ========================================== */
    body {
      --session-bg-color: #111;
      --session-glow: radial-gradient(
        ellipse at bottom,
        rgba(100, 0, 150, 0.2) 0%,
        transparent 70%
      );

      background-color: var(--session-bg-color);
      color: white;
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      width: 100%;
      max-width: 100vw;

      background-image: var(--session-glow),
        linear-gradient(0deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
      background-size: 100% 100%, 40px 40px, 40px 40px;
      background-repeat: no-repeat;
      background-attachment: fixed;
      animation: bgScroll 40s linear infinite;
    }

    @keyframes bgScroll {
      0% {
        background-position: 0 0, 0 0, 0 0;
      }
      100% {
        background-position: 400px 400px, 40px 40px, 40px 40px;
      }
    }

    /* Canvas f√ºr leichten Candle-Hintergrund */
    #bgCandles {
      opacity: 0.035;
      filter: blur(0.6px);
      pointer-events: none;
      max-width: 100%;
      width: 100%;
      display: block;
    }

    /* ‚ôø Bewegungen reduzieren */
    @media (prefers-reduced-motion: reduce) {
      body {
        animation: none !important;
      }
    }

    /* =========================================================
       üì¶ .stats-box ‚Äî Deep Velvet Luxe
       ========================================================= */
    .stats-box {
      --velvet-top: #131116;
      --velvet-mid: #141219;
      --velvet-bot: #0f0d12;
      --accent: var(--glow-color, #f3d27a);

      position: relative;
      max-width: 440px;
      margin: 25px auto 0 auto;
      margin-bottom: 25px !important;
      padding: 20px 22px;
      border-radius: 16px;
      text-align: left;
      overflow: hidden;
      isolation: isolate;

      background:
        radial-gradient(140% 120% at 50% -10%, rgba(255, 255, 255, 0.05), transparent 55%),
        linear-gradient(180deg, var(--velvet-top), var(--velvet-mid) 55%, var(--velvet-bot));
      border: 1px solid rgba(255, 255, 255, 0.04);

      box-shadow:
        0 10px 26px rgba(0, 0, 0, 0.55),
        0 0 16px color-mix(in srgb, var(--accent) 18%, transparent),
        inset 0 1px 2px rgba(255, 255, 255, 0.04);

      animation: statsGlowPulse var(--stats-glow-duration, 3.5s) ease-in-out infinite;
      transition: box-shadow 240ms ease, opacity 240ms ease;
    }

    .stats-box::before {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.015) 0 1px,
          transparent 1px 8px
        ),
        repeating-linear-gradient(
          45deg,
          rgba(0, 0, 0, 0.025) 0 1px,
          transparent 1px 10px
        );
      mix-blend-mode: overlay;
      opacity: 0.6;
    }

    .stats-box::after {
      content: "";
      position: absolute;
      inset: 0;
      z-index: 1;
      pointer-events: none;
      border-radius: inherit;
      box-shadow:
        inset 0 0 0 1px color-mix(in srgb, var(--accent) 55%, transparent),
        inset 0 0 24px color-mix(in srgb, var(--accent) 22%, transparent),
        0 0 22px color-mix(in srgb, var(--accent) 18%, transparent);
      opacity: 0.22;
      transition: opacity 240ms ease;
      animation: luxeRingPulse var(--stats-glow-duration, 3.5s) ease-in-out infinite;
    }

    @keyframes statsGlowPulse {
      0% {
        box-shadow:
          0 10px 26px rgba(0, 0, 0, 0.55),
          0 0 14px color-mix(in srgb, var(--accent) 14%, transparent),
          inset 0 1px 2px rgba(255, 255, 255, 0.04);
      }
      50% {
        box-shadow:
          0 12px 30px rgba(0, 0, 0, 0.6),
          0 0 22px color-mix(in srgb, var(--accent) 26%, transparent),
          inset 0 1px 3px rgba(255, 255, 255, 0.05);
      }
      100% {
        box-shadow:
          0 10px 26px rgba(0, 0, 0, 0.55),
          0 0 14px color-mix(in srgb, var(--accent) 14%, transparent),
          inset 0 1px 2px rgba(255, 255, 255, 0.04);
      }
    }

    @keyframes luxeRingPulse {
      0% {
        opacity: 0.2;
      }
      50% {
        opacity: 0.34;
      }
      100% {
        opacity: 0.2;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .stats-box,
      .stats-box::after {
        animation: none !important;
      }
    }

    /* SESSION-SPEZIFISCHE THEMES */
    .session-glow-sydney { --glow-color: #3388ff; background: linear-gradient(145deg, #1e1e1e, #223044); }
    .session-glow-tokyo  { --glow-color: #00aaff; background: linear-gradient(145deg, #1e1e1e, #1c2e36); }
    .session-glow-london { --glow-color: #ffd700; background: linear-gradient(145deg, #1e1e1e, #3c3c1a); }
    .session-glow-ny     { --glow-color: #ff4500; background: linear-gradient(145deg, #1e1e1e, #3a1e1e); }
    .session-glow-lk     { --glow-color: #ccff00; background: linear-gradient(145deg, #1e1e1e, #3c4a1c); }
    .session-glow-nyk    { --glow-color: #ff8800; background: linear-gradient(145deg, #1e1e1e, #4b2a1c); }
    .session-glow-deadzone { --glow-color: #333333; background: linear-gradient(145deg, #1e1e1e, #2c2c2c); }
    .session-glow-crypto { --glow-color: #9900ff; background: linear-gradient(145deg, #1e1e1e, #3e1e4e); }

    /* üåà CRYPTO LABEL */
    .crypto-animate {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: bold;
      font-size: 18px;
      background: linear-gradient(
        90deg,
        var(--crypto-c1),
        var(--crypto-c2),
        var(--crypto-c3),
        var(--crypto-c1)
      );
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow:
        0 0 6px rgba(0, 255, 255, 0.8),
        0 0 12px rgba(255, 0, 204, 0.6),
        0 0 20px rgba(153, 0, 255, 0.4);
      animation:
        cryptoGradientShift var(--crypto-gradient-duration) ease infinite,
        cryptoGlowPulse var(--crypto-pulse-duration) ease-in-out infinite;
    }

    .crypto-animate .coin {
      display: inline-block;
      font-size: 22px;
      background: linear-gradient(90deg, #ff00cc, #ff8800, #ffff00);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 8px rgba(255, 0, 204, 0.8);
      animation: spinCoin var(--coin-rotate-duration) linear infinite;
    }

    @keyframes spinCoin {
      0% { transform: rotateY(0deg); }
      100% { transform: rotateY(360deg); }
    }

    @keyframes cryptoGradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes cryptoGlowPulse {
      0% {
        text-shadow:
          0 0 6px rgba(0, 255, 255, 0.8),
          0 0 12px rgba(255, 0, 204, 0.6),
          0 0 20px rgba(153, 0, 255, 0.4);
      }
      100% {
        text-shadow:
          0 0 10px rgba(255, 0, 204, 0.9),
          0 0 18px rgba(0, 255, 255, 0.7),
          0 0 30px rgba(153, 0, 255, 0.5);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .crypto-animate,
      .crypto-animate .coin {
        animation: none;
      }
    }

 
  </style>

  <!-- üì± Mobile Stylesheet -->
  <link rel="stylesheet" href="mobile.css" media="screen and (max-width: 480px)" />
</head>

<body>

<!-- =========================== -->
<!-- LEFT ICON SIDEBAR -->
<!-- =========================== -->
<div id="sidebarLeft">
  <button id="btnDash" class="side-icon" data-menu="dashboard">üè†</button>
  <button id="btnTools" class="side-icon" data-menu="tools">üßÆ</button>
  <button id="btnRules" class="side-icon" data-menu="rules">üìú</button>
</div>

<!-- =========================== -->
<!-- DRAWER -->
<!-- =========================== -->
<div id="drawer">
  <div id="drawerHeader">
    <span id="drawerTitle">Men√º</span>
    <button id="drawerCloseBtn">‚úñ</button>
  </div>
  <div id="drawerLinks"></div>
</div>

<!-- =========================== -->
<!-- MAIN WRAPPER -->
<!-- =========================== -->
<div id="mainWrapper">

  <!-- üé® Session-Hintergrund -->
  <div id="sessionBackgroundOverlay"></div>

  <!-- üïí Session-Zeit -->
  <div class="ticker" id="sessionText">Session-Zeit: 00:00</div>

  <!-- üóìÔ∏è Tageszusammenfassung -->
  <div id="daySummary" class="ticker day-summary">üóìÔ∏è Lade Tagesinfo...</div>

  <!-- üì¶ Session-Details -->
  <div class="session-details-box" id="sessionDetailsBox"></div>

  <!-- üìÑ Detail-Text zur Tageszusammenfassung -->
  <div id="dayDetails" class="day-details" style="display: none;"></div>

  <!-- üí¨ Session-Kommentar -->
  <div
    id="sessionInfo"
    style="
      margin-top: 12px;
      padding: 12px 18px;
      color: #fff;
      font-size: clamp(13px, 3.5vw, 16px);
      font-style: italic;
      text-align: center;
      border-radius: 12px;
      background: linear-gradient(
        135deg,
        rgba(153, 0, 255, 0.12),
        rgba(153, 0, 255, 0.22)
      );
      text-shadow:
        0 0 2px rgba(153, 0, 255, 0.6),
        0 0 6px rgba(255, 0, 204, 0.3);
      box-shadow:
        inset 0 0 10px rgba(153, 0, 255, 0.3),
        0 0 6px rgba(255, 0, 204, 0.2);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-weight: 600;
      backdrop-filter: blur(2px);
      transition: all 0.3s ease;
    "
  >
    Tipps und Infos zur Session erscheinen hier...
  </div>

  <!-- üü¢ Fortschrittsbalken -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <!-- ======================= -->
  <!-- MAIN CONTENT -->
  <!-- ======================= -->
  <main id="mainContent">

    <!-- DASHBOARD PANEL -->
    <section id="panel-dashboard" class="panel" style="margin-top: 15px;">
      <div class="stats-box">
        <h3 style="margin-top: 0;">üè† Dashboard</h3>
        <p>
          W√§hle links ein Modul in der Sidebar, um deine Tools zu √∂ffnen
          (Position Size, Steuern, Pair-Profil, Regeln, Quiz, Confluence).
        </p>
      </div>
    </section>

    <!-- ============================================================
         üß† CONFLUENCE CHECKLIST PANEL
       ============================================================ -->
    <section id="panel-confluence" class="panel hidden">
 <!-- ======================================
     üî• BODY CONTENT (NEW PerfectTrade Style)
     ====================================== -->
<div class="conf-body-content">

  <!-- ============================================================
       WEEKLY
       ============================================================ -->
  <div class="tf-card">
    <div class="tf-header">
      <div class="tf-title">WEEKLY</div>
      <div class="tf-score" id="sum_weekly">0%</div>
    </div>
    <div class="tf-sub">0% confluence</div>

    <!-- Trend -->
    <h4 class="tf-section-title">Trend</h4>
    <label><span>Trend</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="weekly" data-points="10">
    </label>

    <!-- AOI -->
    <h4 class="tf-section-title">At AOI / Rejection</h4>

    <label><span>At AOI / Rejected</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="aoi" data-group2="weekly" data-points="10">
    </label>

    <label><span>Touching EMA</span> <span class="pts">+5%</span>
      <input type="checkbox" class="conf-check" data-group="weekly" data-points="5">
    </label>

    <label><span>Round Psychological Level</span> <span class="pts">+2%</span>
      <input type="checkbox" class="conf-check" data-group="weekly" data-points="2">
    </label>

    <label><span>Rejection from Previous Structure</span> <span class="pts">+5%</span>
      <input type="checkbox" class="conf-check" data-group="weekly" data-points="5">
    </label>


    <label><span>Break & Retest / Head & Shoulders Pattern</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="weekly" data-points="10">
    </label>
  </div>


  <!-- ============================================================
       DAILY
       ============================================================ -->
  <div class="tf-card">
    <div class="tf-header">
      <div class="tf-title">DAILY</div>
      <div class="tf-score" id="sum_daily">0%</div>
    </div>
    <div class="tf-sub">0% confluence</div>

    <h4 class="tf-section-title">Trend</h4>
    <label><span>Trend</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="daily" data-points="10">
    </label>

    <h4 class="tf-section-title">At AOI / Rejection</h4>

    <label><span>At AOI / Rejected</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="daily" data-points="10">
    </label>

    <label><span>Touching EMA</span> <span class="pts">+5%</span>
      <input type="checkbox" class="conf-check" data-group="daily" data-points="5">
    </label>

    <label><span>Round Psychological Level</span> <span class="pts">+2%</span>
      <input type="checkbox" class="conf-check" data-group="daily" data-points="2">
    </label>

    <label><span>Rejection from Previous Structure</span> <span class="pts">+5%</span>
      <input type="checkbox" class="conf-check" data-group="daily" data-points="5">
    </label>
	
	   <label><span>Break & Retest / Head & Shoulders Pattern</span> <span class="pts">+8%</span>
      <input type="checkbox" class="conf-check" data-group="daily" data-points="8">
    </label>

  </div>


  <!-- ============================================================
       4H
       ============================================================ -->
  <div class="tf-card">
    <div class="tf-header">
      <div class="tf-title">4H</div>
      <div class="tf-score" id="sum_h4">0%</div>
    </div>
    <div class="tf-sub">0% confluence</div>

    <h4 class="tf-section-title">Trend</h4>
    <label><span>Trend</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="h4" data-points="10">
    </label>


    <h4 class="tf-section-title">At AOI / Rejection</h4>

    <label><span>At AOI / Rejected</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="h4" data-points="10">
    </label>

    <label><span>Touching EMA</span> <span class="pts">+5%</span>
      <input type="checkbox" class="conf-check" data-group="h4" data-points="5">
    </label>

    <label><span>Round Psychological Level</span> <span class="pts">+2%</span>
      <input type="checkbox" class="conf-check" data-group="h4" data-points="2">
    </label>

    <label><span>Rejection from Previous Structure</span> <span class="pts">+5%</span>
      <input type="checkbox" class="conf-check" data-group="h4" data-points="5">
    </label>
	
	   <label><span>Break & Retest / Head & Shoulders Pattern</span> <span class="pts">+6%</span>
      <input type="checkbox" class="conf-check" data-group="h4" data-points="6">
    </label>

  
    <h4 class="tf-section-title">Structure</h4>
    <label><span>4H HL (Buy)</span> <span class="pts">+10%</span>
      <input type="radio" name="h4_htf" class="conf-check" data-group="h4" data-points="10">
    </label>

    <label><span>4H LH (Sell)</span> <span class="pts">+10%</span>
      <input type="radio" name="h4_htf" class="conf-check" data-group="h4" data-points="10">
    </label>
  </div>


  <!-- ============================================================
       2H / 1H / 30m
       ============================================================ -->
  <div class="tf-card">
    <div class="tf-header">
      <div class="tf-title">2H / 1H / 30M</div>
      <div class="tf-score" id="sum_intraday">0%</div>
    </div>
    <div class="tf-sub">0% confluence</div>

    <h4 class="tf-section-title">Trend</h4>
    <label><span>Trend</span> <span class="pts">+5%</span>
      <input type="checkbox" class="conf-check" data-group="intraday" data-points="5">
    </label>
	

    <h4 class="tf-section-title">Structure</h4>
    <label><span>30M HL/LH</span> <span class="pts">+2%</span>
      <input type="checkbox" class="conf-check" data-group="intraday" data-points="2">
    </label>
	
	<label><span>Touching EMA</span> <span class="pts">+2%</span>
      <input type="checkbox" class="conf-check" data-group="intraday" data-points="2">
    </label>

    <label><span>LTF Structure Shift</span> <span class="pts">+2%</span>
      <input type="checkbox" class="conf-check" data-group="intraday" data-points="2">
    </label>
	
	   <label><span>Break & Retest / Head & Shoulders Pattern</span> <span class="pts">+4%</span>
      <input type="checkbox" class="conf-check" data-group="intraday" data-points="4">
    </label>
	
  </div>
 


  <!-- ============================================================
       ENTRY SIGNALS
       ============================================================ -->
  <div class="tf-card">
    <div class="tf-header">
      <div class="tf-title">ENTRY SIGNALS</div>
      <div class="tf-score" id="sum_entry">0%</div>
    </div>
    <div class="tf-sub">0% confluence</div>

    <label><span>Engulfing 1H</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="entry" data-points="10">
    </label>

    <label><span>Engulfing 2H</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="entry" data-points="10">
    </label>

    <label><span>Engulfing 4H</span> <span class="pts">+10%</span>
      <input type="checkbox" class="conf-check" data-group="entry" data-points="10">
    </label>

    <h4 class="tf-section-title">Risk / Reward</h4>
    <label><span>RR 2.5</span> <span class="pts">+1%</span>
      <input type="checkbox" class="conf-check" data-group="entry" data-points="1">
    </label>

    <label><span>SL Padding 5‚Äì7 pips</span> <span class="pts">+1%</span>
      <input type="checkbox" class="conf-check" data-group="entry" data-points="1">
    </label>

    <label><span>TP am Strukturpunkt</span> <span class="pts">+1%</span>
      <input type="checkbox" class="conf-check" data-group="entry" data-points="1">
    </label>

  </div>
  
  <div class="conf-summary">
    <h3 style="margin:0; font-size:16px;">Confluence Summary</h3>

    <div class="conf-summary-grid">
      <div class="conf-box"><span>Weekly</span><strong id="sum_weekly">0%</strong></div>
      <div class="conf-box"><span>Daily</span><strong id="sum_daily">0%</strong></div>
      <div class="conf-box"><span>4H</span><strong id="sum_h4">0%</strong></div>
      <div class="conf-box"><span>2H / 1H / 30m</span><strong id="sum_intraday">0%</strong></div>
      <div class="conf-box"><span>Lower TF</span><strong id="sum_lower">0%</strong></div>
      <div class="conf-box"><span>Entry</span><strong id="sum_entry">0%</strong></div>
    </div>

    <div id="confTotalBox" class="conf-total-box">
      <div>Total Overall Score</div>
      <div id="confTotalValue" class="conf-total-value">0%</div>
      <div id="confTotalText" class="conf-total-text">Low Confluence</div>
    </div>
  </div>
 


</div>



</section>

    <!-- ============================================================
         üìä PAIR PROFILE PANEL
       ============================================================ -->
    <section id="calc-pairProfile" class="panel hidden">
        <div class="stats-box" id="pairProfileBox">
          <h3 style="margin-top: 0; margin-bottom: 10px;">
            üìä Pair-Profil
            <span
              style="
                font-size: 12px;
                color: #aaa;
                display: block;
                margin-top: 4px;
              "
            >
              Statisches Wissensprofil pro Trading-Paar ‚Äì Daten aus deiner
              pairsData.js
            </span>
          </h3>

          <label for="pairProfileSymbol">üí± Trading-Paar w√§hlen:</label>

          <!-- üî• FIX: Wrapper hinzugef√ºgt -->
          <div class="pair-select-wrapper">
            <select id="pairProfileSymbol">
              <option value="">‚Äì Bitte Paar w√§hlen ‚Äì</option>
            </select>
          </div>
          <!-- üî• FIX ENDE -->

          <div id="pairProfileBasics" style="margin-top: 10px; font-size: 14px;">
            <strong>Basis-Daten:</strong>
            <div style="margin-top: 6px;">
              <div>üìå Symbol: <span id="pairProfileSymbolLabel">‚Äì</span></div>
              <div>üí∞ Aktueller Preis: <span id="pairProfilePrice">‚Äì</span></div>
              <div>üìè Pip-Wert (1 Lot): <span id="pairProfilePip">‚Äì</span></div>
              <div>üì¶ Kontraktgr√∂√üe: <span id="pairProfileContract">‚Äì</span></div>
            </div>
          </div>

          <div
            id="pairProfileBehavior"
            style="margin-top: 15px; font-size: 14px; line-height: 1.5;"
          >
            <strong>Verhalten & Charakteristik:</strong>
            <p id="pairProfileText" style="margin-top: 6px;"></p>
          </div>

          <div
            id="pairProfileNotes"
            style="margin-top: 15px; font-size: 13px; color: #ccc;"
          >
            <strong>Setup-Notizen:</strong>
            <ul
              id="pairProfileNotesList"
              style="margin-top: 6px; padding-left: 18px;"
            ></ul>
          </div>
        </div>
      </section>

    <!-- ============================================================
         üìÑ STEUER/NETTO PLANER
       ============================================================ -->
    <section id="calc-taxpro" class="panel hidden">

        <div class="stats-box">
          <label for="jahresEinkommen">üíº Jahresgehalt (9/5 Job, brutto ‚Ç¨):</label>
          <input type="number" id="jahresEinkommen" placeholder="z. B. 42000" />

          <div id="steuerMode">
            <label for="gewinnBetrag">üìà Trading-Gewinn (aktueller Gewinn ‚Ç¨):</label>
            <input
              type="number"
              id="gewinnBetrag"
              placeholder="z. B. 500"
            />

            <label
              ><input type="checkbox" id="kirchensteuer" />
              ‚úùÔ∏è Kirchensteuer (9 %)</label
            ><br />
            <label
              ><input type="checkbox" id="soliZuschlag" />
              üí£ Solidarit√§tszuschlag (5.5 %)</label
            ><br />
            <label
              ><input type="checkbox" id="reserveZehn" />
              üí• Komplette Vorauszahlung f√ºr n√§chstes Jahr</label
            ><br />

            <button onclick="berechneSteuern()" class="tax-button">
              üìä Steuer berechnen
            </button>
            <div id="steuerAusgabe"></div>
          </div>

          <!-- üè¶ Netto-Planer -->
          <div id="nettoMode" style="display: none;">
            <label for="nettoBrutto">üìà Brutto-Gewinn (‚Ç¨):</label>
            <input
              type="number"
              id="nettoBrutto"
              placeholder="z. B. 1000"
            />

            <label for="nettoSteuer">üí∏ Steuerlast (‚Ç¨):</label>
            <input
              type="number"
              id="nettoSteuer"
              placeholder="z. B. 350"
            />

            <label for="nettoReserve">üí• Reserve (‚Ç¨):</label>
            <input
              type="number"
              id="nettoReserve"
              placeholder="z. B. 250"
            />

            <label for="nettoEntnommen">üè¶ Tats√§chlich entnommen (‚Ç¨):</label>
            <input
              type="number"
              id="nettoEntnommen"
              placeholder="z. B. 800"
            />

            <button onclick="berechneNettoPlan()" class="tax-button">
              üí∏ Netto berechnen
            </button>
            <div id="nettoAusgabe"></div>
          </div>

          <div id="tradeTable" style="margin-top: 20px;"></div>

          <button onclick="switchPlanMode()" id="planToggleBtn">
            üîÅ Zu Netto-Planer wechseln
          </button>
        </div>
      </section>

    <!-- ============================================================
         üìê POSITION SIZE RECHNER
       ============================================================ -->
    <section id="calc-pos" class="panel hidden">

      <h3>üìê Position Size Rechner</h3>

     <!-- Normaler Positionsgr√∂√üenrechner -->
        <div id="pos-mode-main" class="stats-box sub-box">

          <label for="accountSize">üì¶ Kontogr√∂√üe (‚Ç¨):</label>
          <input
            type="number"
            id="accountSize"
            placeholder="z. B. 1000"
          />

          <label for="riskPercent">‚ö†Ô∏è Risiko in %:</label>
          <input
            type="number"
            id="riskPercent"
            placeholder="z. B. 1"
            step="0.1"
          />

          <label for="stopLossPips">üõë Stop-Loss (in Pips):</label>
          <input
            type="number"
            id="stopLossPips"
            placeholder="z. B. 20"
          />

          <label for="symbolSelector">üí± Trading-Paar:</label>
          <select id="symbolSelector"></select>

          <label for="leverage">‚öôÔ∏è Hebel:</label>
          <input type="number" id="leverage" value="500" min="1" />

          <button onclick="calculatePositionSize()">üìê Berechnen</button>
          <div id="positionSizeResult" class="result-box"></div>

          <button
            onclick="switchPosMode('max')"
            style="margin-top: 15px; width: 100%;"
          >
            üîÅ Zu Max-Positions-Rechner
          </button>
          <button
            onclick="switchPosMode('pips')"
            style="margin-top: 10px; width: 100%;"
          >
            üîÅ Zu Pip-Rechner
          </button>
        </div>

      <!-- MAX_POS_MODE -->
      <div id="pos-mode-max" class="stats-box sub-box hidden">

             <label for="maxposAccountSize">üì¶ Kontogr√∂√üe (‚Ç¨):</label>
          <input
            type="number"
            id="maxposAccountSize"
            placeholder="z. B. 1000"
          />

          <label for="maxposRiskPercent">‚ö†Ô∏è Risiko in % pro Trade:</label>
          <input
            type="number"
            id="maxposRiskPercent"
            placeholder="z. B. 1"
            step="0.1"
          />

          <label for="maxposSymbol">üí± Trading-Paar:</label>
          <select id="maxposSymbol"></select>

          <label for="maxposStopLoss">üõë Stop-Loss (in Pips):</label>
          <input
            type="number"
            id="maxposStopLoss"
            placeholder="z. B. 20"
          />

          <label for="maxposLeverage">‚öôÔ∏è Hebel:</label>
          <input type="number" id="maxposLeverage" value="500" min="1" />

          <label for="lotMain">üìè Lotgr√∂√üe (Pflicht):</label>
          <input
            type="number"
            id="lotMain"
            step="0.01"
            placeholder="z. B. 0.10"
          />

          <label for="lotAlt">üìè Alternative Lotgr√∂√üe (optional):</label>
          <input
            type="number"
            id="lotAlt"
            step="0.01"
            placeholder="z. B. 0.25"
          />

          <button onclick="calculateMaxPositions()">üìè Berechnen</button>
          <div id="maxposResults" class="result-box"></div>

        <button onclick="switchPosMode('main')" style="margin-top: 15px;">
          üîÅ Zur√ºck
        </button>
      </div>

     <!-- PIP MODE -->
<div id="pos-mode-pips" class="stats-box sub-box hidden">

  <label>üí± Symbol:</label>
  <select id="pipSymbolSelector"></select>

  <label>üì¶ Lots:</label>
  <input type="number" id="lots" value="0.01" step="0.01" />

  <label>üõë Stop-Loss (Pips):</label>
  <input type="number" id="slPips" placeholder="z. B. 20" />

  <label>üéØ TP1 (Pips):</label>
  <input type="number" id="tp1Pips" placeholder="z. B. 50" />

  <label>üéØ TP2 (Pips):</label>
  <input type="number" id="tp2Pips" placeholder="z. B. 80" />

  <label>üéØ TP3 (Pips):</label>
  <input type="number" id="tp3Pips" placeholder="z. B. 100" />

  <button onclick="calculatePipsByLots()">üìè Berechnen</button>

  <div id="pipResult" class="result-box"></div>

  <!-- ========================== -->
  <!-- üîÅ SWAP-RECHNER BUTTON -->
  <!-- ========================== -->
  <button id="openSwapBtn" style="margin-top: 15px; width: 100%;">
    üîÅ Optimaler Swap-Rechner
  </button>

  <!-- ========================== -->
  <!-- üîÅ SWAP-RECHNER BOX (HIDDEN) -->
  <!-- ========================== -->
  <div id="swapBox" class="stats-box sub-box hidden" style="margin-top: 15px;">

    <h3 style="text-align:center;">üîÅ Optimaler Swap-Rechner</h3>

    <div class="grid">
      <label>
        Swap Long (pro Tag in Pips/Punkten)
        <input id="swapLongPts" type="text" placeholder="z. B. -3.96">
      </label>

      <label>
        Swap Short (pro Tag in Pips/Punkten)
        <input id="swapShortPts" type="text" placeholder="z. B. -2.36">
      </label>

      <label class="row">
        <input id="swapTripleDay" type="checkbox" checked>
        Mittwoch 3√ó (FX-Standard)
      </label>

      <label class="row">
        <input id="swapShowWeek" type="checkbox" checked>
        Woche (Mo‚ÄìFr) anzeigen
      </label>

      <button id="swapCalcBtn" type="button">Swap berechnen</button>
    </div>

    <div id="swapResult" class="result-box" style="display:none;"></div>

    <button id="closeSwapBtn" style="margin-top: 10px; width: 100%;">
      ‚¨ÖÔ∏è Swap-Rechner schlie√üen
    </button>
  </div>

  <button onclick="switchPosMode('main')" style="margin-top: 15px; width: 100%;">
    üîÅ Zur√ºck
  </button>
</div>


    <!-- ============================================================
         üìú REGELN PANEL
       ============================================================ -->
    <section id="panel-rules" class="panel hidden">
     
        <!-- Toggle-Box -->
        <div
          onclick="toggleRules()"
          style="
            background: linear-gradient(135deg, #2a0b0b, #1a0000);
            border: 1px solid #ff3333;
            border-radius: 6px;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            padding: 16px 20px;
            text-align: center;
            box-shadow:
              0 0 12px rgba(255, 60, 60, 0.8),
              inset 0 0 12px rgba(255, 0, 0, 0.6);
            transition: all 0.2s ease-in-out;
          "
          onmouseover="this.style.borderColor='#ff5555'; this.style.boxShadow='0 0 20px rgba(255,80,80,1), inset 0 0 14px rgba(255,20,20,0.8)';"
          onmouseout="this.style.borderColor='#ff3333'; this.style.boxShadow='0 0 12px rgba(255,60,60,0.8), inset 0 0 12px rgba(255,0,0,0.6)';"
          onfocus="this.style.outline='3px solid #ff6666';"
          onblur="this.style.outline='none';"
        >
          üöÄ
          <strong style="color: #ff6666;"
            >Setup-Regeln anzeigen / ausblenden</strong
          >
        </div>

        <div class="rules-fire-wrapper">
          <div
            id="rulesBox"
            class="stats-box"
            style="display: none; line-height: 1.6;"
          >
            <strong>üìú Rules of Rules ‚Äì Deutsch</strong><br /><br />

            <div style="text-align: right; margin-bottom: 15px;">
              <button id="switchModeBtn" onclick="switchMode()">
                üîÑ Zu Day-Trading Regeln wechseln
              </button>
            </div>

            <!-- ========== SWING ========== -->
            <div id="swingRules">
              <!-- Seite 1 -->
              <div id="rulePageSwing1">
                <strong>Grundregeln f√ºr Entry & Struktur</strong><br /><br />

                <ul style="margin-left: 20px;">
                  <strong>AOI-Zone w√§hlen:</strong><br />
                  Ein Entry (Kauf/Verkauf) darf nur an einer Weekly- oder
                  Daily-AOI stattfinden.<br />
                  ‚Üí Alle Timeframes darunter (H4 und kleiner) dienen
                  ausschlie√ülich zur Entry-Best√§tigung.
                  <br /><br />

                  <strong>Kein Entry ohne Rejection von:</strong>
                  <ul style="margin-left: 20px; list-style: disc;">
                    <li>Strukturpunkt</li>
                    <li>EMA</li>
                    <li>AOI</li>
                    <li>Runder psychologischer Level (00 / 50)</li>
                    <li>
                      Weekly Rejection Candle (sichtbar im Weekly oder Daily)
                    </li>
                  </ul>
                  <br />

                  <strong>Pflichtbedingungen f√ºr Buy/Sell Entry:</strong>
                  <ul style="margin-left: 20px; list-style: disc;">
                    <li>Buy nur bei einem best√§tigten Higher Low (HL) im 4H</li>
                    <li>Sell nur bei einem best√§tigten Lower High (LH) im 4H</li>
                    <li>
                      Alternativ: Potenzielles HL/LH mit Engulfing an einer AOI
                      (Support/Resistance)
                    </li>
                  </ul>
                  <br />

                  <strong>Entry-Prozess nach HL/LH:</strong><br />
                  Sobald ein HL oder LH gebildet wird, muss ein Struktur-Shift
                  (15M‚Äì1H) beobachtet und mit dem h√∂heren TF abgeglichen
                  werden.
                  <br /><br />

                  <strong>Nach dem Struktur-Shift (15M, 30M, 1H):</strong>
                  <ul style="margin-left: 20px; list-style: disc;">
                    <li>Suche nach einer Engulfing-Candle im 1H / 2H / 4H</li>
                    <li>Je h√∂her der TF, desto st√§rker die Best√§tigung</li>
                  </ul>
                </ul>
                <br />

                <strong>Stop-Loss & Take-Profit Regeln</strong><br /><br />
                <ul style="margin-left: 20px; list-style: disc;">
                  <li>
                    <strong>Stop-Loss:</strong><br />
                    Der SL muss an dem Punkt gesetzt werden, an dem die
                    Handelsidee vollst√§ndig ung√ºltig wird.<br />
                    ‚Üí Alternativ am Top/Bottom des Struktur-Shifts (15M, 30M,
                    1H), mit 5‚Äì7 Pips Sicherheitsabstand.
                  </li>
                  <br />

                  <li>
                    <strong>Take-Profit:</strong>
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>
                        Wenn Entry an Weekly AOI ‚Üí TP1 am Strukturpunkt
                        (Kerzenk√∂rper des HH/LL)
                      </li>
                      <li>
                        Wenn Entry an Daily AOI ‚Üí TP1 am Strukturpunkt
                        (Kerzenk√∂rper des HH/LL)
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>

              <!-- Seite 2 -->
              <div id="rulePageSwing2" style="display: none;">
                <strong>Confluence-Regeln f√ºr Long / Short</strong><br /><br />

                <ol style="margin-left: 20px;">
                  <li>
                    <strong>Markt-Bias Bewertung:</strong>
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>Weekly Bullish/Bearish: Wert 1‚Äì3</li>
                      <li>Daily Bullish/Bearish: Wert 1‚Äì3</li>
                      <li>4H Bullish/Bearish: Wert 1‚Äì3</li>
                    </ul>
                    Bewertungsstufen:
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>1 = Markt oben (weit weg von AOI)</li>
                      <li>2 = Auf dem Weg zur AOI</li>
                      <li>3 = In der AOI</li>
                    </ul>
                  </li>
                  <br />

                  <li>
                    <strong>Struktur-Retest (HTF):</strong><br />
                    Weekly retestet vorherigen Strukturpunkt
                  </li>
                  <br />

                  <li>
                    <strong>Daily Rejection:</strong>
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>Rejection an AOI</li>
                      <li>
                        Rejection an rundem psychologischen Level (00 / 50)
                      </li>
                    </ul>
                  </li>
                  <br />

                  <li>
                    <strong>Strukturaufbau (LTF):</strong>
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>Warten auf HL / LH</li>
                      <li>Struktur-Shift auf 15M / 30M / 1H</li>
                    </ul>
                  </li>
                  <br />

                  <li>
                    <strong>Entry-Signal:</strong><br />
                    Best√§tigung durch bullisches oder b√§risches Candle-Muster
                    (1H / 2H / 4H)
                  </li>
                  <br />

                  <li>
                    <strong>Set and Forget:</strong><br />
                    Nach Entry nicht eingreifen ‚Äì Setup vertrauen, kein
                    Nachjustieren
                  </li>
                </ol>
              </div>
            </div>

            <!-- ========== DAY ========== -->
            <div id="dayRules" style="display: none;">
              <!-- Seite 1 Day -->
              <div id="rulePageDay1">
                <strong
                  >Grundregeln f√ºr Entry & Struktur (Day-Trading)</strong
                ><br /><br />

                <ul style="margin-left: 20px;">
                  <strong>AOI-Zone w√§hlen:</strong><br />
                  Ein Entry darf nur an einer Daily- oder 4H-AOI stattfinden.<br />
                  ‚Üí 1H/15M dienen ausschlie√ülich zur Entry-Best√§tigung.
                  <br /><br />

                  <strong>Kein Entry ohne Rejection von:</strong>
                  <ul style="margin-left: 20px; list-style: disc;">
                    <li>Strukturpunkt</li>
                    <li>EMA</li>
                    <li>AOI</li>
                    <li>Runder psychologischer Level (00 / 50)</li>
                    <li>Daily/4H Rejection Candle</li>
                  </ul>
                  <br />

                  <strong>Pflichtbedingungen f√ºr Buy/Sell Entry:</strong>
                  <ul style="margin-left: 20px; list-style: disc;">
                    <li>Buy: best√§tigtes HL im 1H oder 4H</li>
                    <li>Sell: best√§tigtes LH im 1H oder 4H</li>
                    <li>
                      Oder potenzielles HL/LH mit Engulfing an einer AOI
                    </li>
                  </ul>
                  <br />

                  <strong>Entry-Prozess nach HL/LH:</strong><br />
                  Sobald ein HL oder LH gebildet wird, muss ein Struktur-Shift
                  (15M‚Äì1H) beobachtet und mit dem h√∂heren TF (4H/D1)
                  abgeglichen werden.
                  <br /><br />

                  <strong>Nach dem Struktur-Shift (15M/1H):</strong>
                  <ul style="margin-left: 20px; list-style: disc;">
                    <li>Suche nach einer Engulfing-Candle im 1H oder 4H</li>
                  </ul>
                </ul>
                <br />

                <strong>Stop-Loss & Take-Profit Regeln</strong><br /><br />
                <ul style="margin-left: 20px; list-style: disc;">
                  <li>
                    <strong>Stop-Loss:</strong><br />
                    SL am Punkt setzen, wo die Handelsidee ung√ºltig wird.<br />
                    ‚Üí Alternativ am Top/Bottom des Struktur-Shifts (15M/1H),
                    mit 3‚Äì5 Pips Sicherheitsabstand.
                  </li>
                  <br />

                  <li>
                    <strong>Take-Profit:</strong>
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>
                        Wenn Entry an 4H AOI ‚Üí TP1 am n√§chsten 1H/4H
                        Strukturpunkt
                      </li>
                      <li>
                        Wenn Entry an Daily AOI ‚Üí TP1 am Daily Strukturpunkt
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>

              <!-- Seite 2 Day -->
              <div id="rulePageDay2" style="display: none;">
                <strong
                  >Confluence-Regeln f√ºr Long / Short (Day-Trading)</strong
                ><br /><br />

                <ol style="margin-left: 20px;">
                  <li>
                    <strong>Markt-Bias Bewertung:</strong>
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>Daily Bullish/Bearish: Wert 1‚Äì3</li>
                      <li>4H Bullish/Bearish: Wert 1‚Äì3</li>
                      <li>1H Bullish/Bearish: Wert 1‚Äì3</li>
                    </ul>
                    Bewertungsstufen:
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>1 = Markt oben (weit weg von AOI)</li>
                      <li>2 = Auf dem Weg zur AOI</li>
                      <li>3 = In der AOI</li>
                    </ul>
                  </li>
                  <br />

                  <li>
                    <strong>Struktur-Retest:</strong><br />
                    4H retestet vorherigen Strukturpunkt
                  </li>
                  <br />

                  <li>
                    <strong>Rejection:</strong><br />
                    Daily/4H Rejection an AOI oder psychologischem Level
                    (00/50)
                  </li>
                  <br />

                  <li>
                    <strong>Strukturaufbau:</strong>
                    <ul style="margin-left: 20px; list-style: disc;">
                      <li>Warten auf HL / LH</li>
                      <li>Struktur-Shift auf 15M oder 1H</li>
                    </ul>
                  </li>
                  <br />

                  <li>
                    <strong>Entry-Signal:</strong><br />
                    Best√§tigung durch Candle-Muster (15M/1H)
                  </li>
                  <br />

                  <li>
                    <strong>Set and Forget:</strong><br />
                    Nach Entry nicht eingreifen ‚Äì Setup vertrauen
                  </li>
                </ol>
              </div>
            </div>

            <div
              style="
                margin-top: 20px;
                display: flex;
                justify-content: space-between;
              "
            >
              <button
                onclick="showPage(1)"
                id="prevPageBtn"
                style="display: none;"
              >
                ‚¨ÖÔ∏è Zur√ºck
              </button>
              <button onclick="showPage(2)" id="nextPageBtn">Weiter ‚û°Ô∏è</button>
            </div>

            <div class="fire-particles"></div>
          </div>
        </div>
      </section>


    <!-- ============================================================
         üß† THEORIE-TEST (QUIZ)
       ============================================================ -->
    <section id="panel-quiz" class="panel hidden">

      <h3>üß† Theorie-Test</h3>
      <p>Starte deinen Quiz, um dein Wissen zu testen.</p>

      <button id="btn-calc-quiz">üß† Theorie-Test starten</button>

      <div id="quizOverlay" class="quiz-overlay hidden">
        <div class="quiz-modal">
          <button class="quiz-close" onclick="closeQuiz()">‚úñ</button>
          <h2>üß† Theorie-Test</h2>
          <div id="quizContent"></div>
        </div>
      </div>

    </section>

  </main>
</div> <!-- /#mainWrapper -->

<!-- ============================================================
     JS IMPORTS (alle deine originalen Scripts)
   ============================================================ -->
<script src="scripts/pairProfileData.js"></script>
<script src="scripts/pairsData.js"></script>

<script src="scripts/session-popup.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="scripts/buttons.js"></script>
<script src="scripts/crypto.js"></script>
<script src="scripts/session.js"></script>
<script src="scripts/screen.js"></script>
<script src="scripts/background-session.js"></script>

<script src="scripts/pairProfile.js"></script>
<script src="scripts/posmax.js"></script>
<script src="scripts/position.js"></script>
<script src="scripts/Piprechner.js"></script>
<script src="scripts/swapCalc.js"></script>
<script src="scripts/checklist.js"></script>

<script src="scripts/dawn.js"></script>
<script src="scripts/tax.js"></script>
<script src="imageStorage.js"></script>
<script src="scripts/bg-candles.js"></script>
<script src="scripts/ticker.js"></script>
<script src="scripts/jornal.js"></script>
<script src="scripts/pwa.js"></script>
<script src="scripts/rules.js"></script>
<script type="module" src="pocketbase-init.js"></script>

<script src="scripts/quiz.js"></script>
<script src="scripts/quiz-db.js"></script>

<!-- ============================================================
     ‚ö° NEW SIDEBAR v0.2 ‚Äî HYBRID LOGIK
     (Icons √∂ffnen Drawer, Unterpunkte √∂ffnen Panels)
   ============================================================ -->
<script>
/* ======================
   SIDEBAR v0.2 HYBRID LOGIK
   ====================== */

const drawer = document.getElementById("drawer");
const drawerTitle = document.getElementById("drawerTitle");
const drawerLinks = document.getElementById("drawerLinks");
const mainWrapper = document.getElementById("mainWrapper");

// Nur Top-Level-Panels im <main>
const panels = document.querySelectorAll("main > section.panel");

// Buttons (Icons)
const btnDash = document.getElementById("btnDash");
const btnTools = document.getElementById("btnTools");
const btnRules = document.getElementById("btnRules");


// ===============================
// MENU DEFINITIONEN
// ===============================
const MENU = {
  dashboard: {
    title: "Dashboard",
    items: [
      { label: "Dashboard", panel: "panel-dashboard" }
    ]
  },
  tools: {
    title: "Rechner",
    items: [
      { label: "Position Size", panel: "calc-pos" },
      { label: "Steuern / Netto", panel: "calc-taxpro" },
      { label: "Pair Profil", panel: "calc-pairProfile" }
    ]
  },
  rules: {
    title: "Regeln & Wissen",
    items: [
      { label: "Regeln", panel: "panel-rules" },
      { label: "Theorie-Test", panel: "panel-quiz" },
      { label: "Confluence", panel: "panel-confluence" }
    ]
  }
};


/* ============================================================
   SESSION ‚Üí SIDEBAR & DRAWER COLOR SYNC
   ============================================================ */

function applySidebarDrawerSessionColor(sessionName) {
    const color = sessionColors[sessionName] || "#888"; // Fallback

    // === CSS Variablen global setzen ===
    document.documentElement.style.setProperty("--session-accent", color);
    document.documentElement.style.setProperty("--session-accent-soft", color + "33");
    document.documentElement.style.setProperty("--session-accent-border", color + "55");

    // === Drawer dynamisch einf√§rben ===
    drawer.style.borderLeft = `1px solid ${color}`;
    drawerTitle.style.color = color;
    if (drawerCloseBtn) {
        drawerCloseBtn.style.borderColor = color + "66";
        drawerCloseBtn.style.color = color;
    }

    // === Drawer-Links einf√§rben (wenn ge√∂ffnet) ===
    const links = drawer.querySelectorAll(".drawer-link");
    links.forEach(l => {
        l.style.borderColor = color + "33";
        l.style.color = color;
        l.onmouseenter = () => {
            l.style.borderColor = color;
            l.style.color = color;
            l.style.background = color + "11";
        };
        l.onmouseleave = () => {
            l.style.borderColor = color + "33";
            l.style.color = color;
            l.style.background = "transparent";
        };
    });

    // === Sidebar-Buttons einf√§rben ===
    const sidebarButtons = document.querySelectorAll("#sidebarLeft button");
    sidebarButtons.forEach(btn => {
        btn.style.setProperty("--btn-accent", color);

        btn.onmouseenter = () => {
            btn.style.borderColor = color;
            btn.style.color = color;
        };

        btn.onmouseleave = () => {
            btn.style.borderColor = "";
            btn.style.color = "";
        };
    });
}


// ===============================
// PANELS AUSBLENDEN
// ===============================
function hideAllPanels() {
  panels.forEach(p => p.classList.add("hidden"));
}


// ===============================
// DRAWER SCHLIESSEN (universell)
// ===============================
function closeDrawer() {
  drawer.classList.remove("open");

  // Desktop ‚Üí Push-Mode raus
  if (window.innerWidth > 900) {
    mainWrapper.classList.remove("drawer-open");
  }

  resetActive();
}


// ===============================
// DRAWER √ñFFNEN
// ===============================
function openDrawer(cat) {
  const def = MENU[cat];
  if (!def) return;

  drawerTitle.textContent = def.title;
  drawerLinks.innerHTML = "";


  // --- Untermen√º erzeugen ---
  def.items.forEach(item => {
    const div = document.createElement("div");
    div.className = "drawer-link";
    div.textContent = item.label;

    div.onclick = () => {
      hideAllPanels();
      const panel = document.getElementById(item.panel);
      if (panel) panel.classList.remove("hidden");

      closeDrawer();
    };

    drawerLinks.appendChild(div);
  });

  // Drawer √∂ffnen
  drawer.classList.add("open");

  // Desktop ‚Üí Push-Mode
  if (window.innerWidth > 900) {
    mainWrapper.classList.add("drawer-open");
  }
}


// ===============================
// ACTIVE-ZUSTAND RESET
// ===============================
function resetActive() {
  btnDash.classList.remove("active");
  btnTools.classList.remove("active");
  btnRules.classList.remove("active");
}


// ===============================
// ICON BUTTON EVENTS
// ===============================
btnDash.onclick = () => {
  resetActive();
  btnDash.classList.add("active");
  openDrawer("dashboard");
};

btnTools.onclick = () => {
  resetActive();
  btnTools.classList.add("active");
  openDrawer("tools");
};

btnRules.onclick = () => {
  resetActive();
  btnRules.classList.add("active");
  openDrawer("rules");
};


// ===============================
// CLOSE BUTTON IM DRAWER
// ===============================
const drawerCloseBtn = document.getElementById("drawerCloseBtn");
if (drawerCloseBtn) {
  drawerCloseBtn.onclick = () => closeDrawer();
}


// ===============================
// AUTO-SCHLIESSEN BEI KLICK AUSSERHALB
// ===============================
document.addEventListener("click", e => {
  if (
    !drawer.contains(e.target) &&
    !document.getElementById("sidebarLeft").contains(e.target)
  ) {
    closeDrawer();
  }
}, true);

</script>



</body>
</html>
